---
title: 项目中的工具类
author: 墨白
img: 
coverImg: 
top: false
abbrlink: 1046482419
cover: false
toc: true
mathjax: false
tags:
  - Utils
categories:
  - Java
date: 2019-12-17 14:40:39
password:
summary:
---

### 日期类型转换器

~~~java
package com.mobaijun.web.utils.date;

import org.springframework.core.convert.converter.Converter;
import org.springframework.stereotype.Component;
import org.springframework.util.StringUtils;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

/**
 * Author: Auser·杰
 * Development: IntelliJ IDEA 2018.2.4 x64
 * ClassName: StringToDateConverter
 * ClassCreateDate: 2019/12/17 10:45
 * 类简介:日期转换
 */
@Component
public class StringToDateConverter implements Converter<String, Date> {

    /**
     * Author: Auser·杰
     * MethodName: convert
     * MethodCreateDate: 2019/12/17 13:43
     * Return: java.util.Date
     * Param: [source]
     * 方法说明:自定义日期转换
     */
    @Override
    public Date convert(String source) {
        try {
            // 判断:
            // import org.springframework.util.StringUtils;
            if (StringUtils.isEmpty(source)) {
                return null;
            }
            // 转换
            return new SimpleDateFormat("yyyy-MM-dd").parse(source);
        } catch (ParseException e) {
            e.printStackTrace();
            return null;
        }
    }
}

~~~

spring-mvc配置

~~~xml
 <!--3.开启注解驱动-->
    <mvc:annotation-driven conversion-service="conversionServiceFactory"/>
    <!--4.配置日期转换类工厂-->
    <bean id="conversionServiceFactory"
          class="org.springframework.context.support.ConversionServiceFactoryBean">
        <property name="converters">
            <set>
                <!--注入自定义的类型转换器-->
                <ref bean="stringToDateConverter"/>
            </set>
        </property>
    </bean>
~~~

### 统一异常处理类

~~~java
package com.mobaijun.web.utils.exceptions;

import org.springframework.stereotype.Component;
import org.springframework.web.servlet.HandlerExceptionResolver;
import org.springframework.web.servlet.ModelAndView;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Author: Auser·杰
 * Development: IntelliJ IDEA 2018.2.4 x64
 * ClassName: CustomExceptionResolver
 * ClassCreateDate: 2019/12/17 11:55
 * 类简介:SpringMVC提供的异常处理类：
 * 1. 实现HandlerExceptionResolver接口
 * 2. 创建当前异常类，加入容器
 */
@Component
public class CustomExceptionResolver implements HandlerExceptionResolver {

    /**
     * Author: Auser·杰
     * MethodName: resolveException
     * MethodCreateDate: 2019/12/17 11:57
     * Return: org.springframework.web.servlet.ModelAndView
     * Param: [request, response, handler, ex]
     * 方法说明:
     * 1.跳转到美化了的错误页面
     * 2.携带错误信息
     */
    @Override
    public ModelAndView resolveException(HttpServletRequest request,
                                         HttpServletResponse response,
                                         Object handler,
                                         Exception ex) {
        // 打印异常信息
        ex.printStackTrace();
        // 返回
        ModelAndView mv = new ModelAndView();
        mv.setViewName("error");
        mv.addObject("errorMsg", "系统忙，稍后再试或联系管理员：120!" + ex.getMessage());
        return mv;
    }
}
~~~

#### spring配置文件需要开启注解扫描

~~~xml
 <!-- 开启组件扫描 -->
 <context:component-scan base-package="com.mobaijun.web"/>
~~~

